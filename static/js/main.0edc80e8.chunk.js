(this["webpackJsonpcentipede-app"]=this["webpackJsonpcentipede-app"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(8),i=n.n(o),c=(n(19),n(13)),s=n(3),l=n(1),u=(n(20),n(4)),f=n.n(u),m=n(0),y=function(e){console.log("Element!");var t="".concat(f.a["game-item"]," ").concat(f.a[e.background]," ").concat(f.a.image," ").concat("empty"!==e.content&&f.a[e.content]," ");return Object(m.jsx)("div",{className:t},e.id)},d=a.a.memo(y),_=n(9),v=n.n(_),p=function(e){var t=e.arena.map((function(e){return Object(m.jsx)("div",{className:v.a.line,children:e.items.map((function(e){return Object(m.jsx)(d,{background:e.background,content:e.content},e.id)}))},e.id)}));return Object(m.jsx)(m.Fragment,{children:t})},h=n(7),g=n.n(h),x=function(e){var t="Score : ".concat(e.score);return console.log(t),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:g.a.scores,children:t}),Object(m.jsx)("div",{className:g.a.logo,children:"Centipede"})]})},b=n(10),j=n(11),O=n(14),E=n(12),k=function(e){Object(O.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).state={hasError:!1},e}return Object(j.a)(n,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0})}},{key:"render",value:function(){return!0===this.state.hasError?Object(m.jsx)("p",{children:"Something was wrong..."}):this.props.children}}]),n}(r.Component),w=20,M=20,T="empty",P="mushroom",Y=function(e,t,n){return 1===n.mushrooms[e][t]},N=function(e,t,n){n.game_arena[e].items[t].content=P,n.mushrooms[e][t]=1},S=function(e,t,n){n.game_arena[e].items[t].content=T,n.mushrooms[e][t]=0},C=function(){var e=Math.floor(18*Math.random()),t=Math.random()<.5?"bugleft":"bugright";return{x:"bugleft"===t?19:0,y:e,direction:t,speed:Math.floor(1+3*Math.random()),tick:1}},A=function(e,t){for(var n=[],r=0;r<5;r++)n.push(C());return n},D=function(e){if(!0===e.to_remove)return C();var t=e.x,n=e.y;if(e.tick++,e.tick>e.speed){if("bugleft"===e.direction){if((t-=1)<0)return C()}else if((t+=1)>19)return C();e.tick=1}return{x:t,y:n,direction:e.direction,speed:e.speed,tick:e.tick}},F=function(e){var t,n=Object(l.a)(e.bugs);try{for(n.s();!(t=n.n()).done;){var r=t.value;Math.random()<.4?N(r.x,r.y,e):e.game_arena[r.x].items[r.y].content=T}}catch(a){n.e(a)}finally{n.f()}return e},B=function(e){var t,n=Object(l.a)(e.bugs);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.game_arena[r.x].items[r.y].content=r.direction}}catch(a){n.e(a)}finally{n.f()}return e},I=function(e,t){e.tick++;var n=e.x+e.direction,r=e.y;if(e.tick>e.speed)if(n>=0&&n<w){if(Y(n,r,t)){if(r+=1,n=e.x,r===M)return;Y(n,r,t)&&(e.direction=-e.direction),S(n,r,t)}}else{if(r+=1,n=e.x,r===M)return;e.direction=-e.direction,S(n,r,t)}return{x:n,y:r,direction:e.direction,tick:e.tick,speed:e.speed}},G=function(e,t){var n=t.centipede.filter((function(t){return t!==e}));return N(e.x,e.y,t),n},L=function(e){var t=[];J(e);var n,r=Object(l.a)(e.centipede);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=I(a,e);void 0!==o&&t.push(o)}}catch(i){r.e(i)}finally{r.f()}return 0===t.length&&(t=function(){for(var e=[],t=Math.random()>.5?"right":"left",n=5+Math.floor(7*Math.random()),r=0;r<n;r++)if("right"===t){var a={x:w-n+r,y:0,direction:-1,speed:1+Math.floor(3*Math.random()),tick:1};e.push(a)}else{var o={x:r,y:0,direction:1,speed:1+Math.floor(3*Math.random()),tick:1};e.push(o)}return e}()),e.centipede=t,Q(e),t},J=function(e){var t,n=Object(l.a)(e.centipede);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.game_arena[r.x].items[r.y].content=T}}catch(a){n.e(a)}finally{n.f()}},Q=function(e){var t,n=Object(l.a)(e.centipede);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.game_arena[r.x].items[r.y].content="right"===r.direction?"ant-right":"ant-left"}}catch(a){n.e(a)}finally{n.f()}},R=function(e,t){if(!0!==t.to_remove){var n=t.x,r=t.y;return r>0?{x:n,y:r-=1}:void 0}},U=function(e){V(e);var t,n=[],r=Object(l.a)(e.missles);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=R(0,a);void 0!==o&&n.push(o)}}catch(i){r.e(i)}finally{r.f()}return e.missles=n,function(e){var t,n=Object(l.a)(e.missles);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.game_arena[r.x].items[r.y].content="missle"}}catch(i){n.e(i)}finally{n.f()}}(e),n},V=function(e){var t,n=Object(l.a)(e.missles);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.player_x===r.x&&e.player_y===r.y)break;e.game_arena[r.x].items[r.y].content=T}}catch(a){n.e(a)}finally{n.f()}return e},q=function(e){return e.missles.push({x:e.player_x,y:e.player_y}),e.missles},W=function(){var e=function(e,t){for(var n=[],r=0;r<t;r++){for(var a=[],o=0;o<e;o++)a.push((Math.random()<.001?P:T)===P?1:0);n.push(a)}return n}(w,M),t={player_is_alive:!0,game_is_over:!1,game_arena:function(e,t,n){for(var r=[],a=0;a<t;a++){for(var o={id:a,items:[]},i=0;i<e;i++)o.items.push({background:Math.random()<.5?"green":"yellow",content:T,id:1e3*a+3*i});r.push(o)}return r}(w,M),player_x:10,player_y:19,score:0,bugs:A(),missles:[],centipede:[],mushrooms:e};return t=function(e){return e.game_arena[e.player_x].items[e.player_y].content="player",e}(t=function(e){for(var t in e.mushrooms)for(var n in e.mushrooms[t]){var r=e.mushrooms[t][n];e.game_arena[t].items[n].content=1===r?P:T}return e}(t=B(t)))},z=function(e,t){if("tick"===t.TYPE){if(e.player_is_alive){var n=Object(s.a)({},e);return n.missles=U(e),n.bugs=function(e){F(e);var t,n=[],r=Object(l.a)(e.bugs);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(D(a))}}catch(o){r.e(o)}finally{r.f()}return e.bugs=n,B(e),e.bugs}(e),n.centipede=L(e),function(e){var t,n=Object(l.a)(e.missles);try{var r=function(){var n=t.value,r=e.bugs.filter((function(e){return e.x===n.x&&e.y===n.y}));if(r.length>0){n.to_remove=!0;var a,o=Object(l.a)(r);try{for(o.s();!(a=o.n()).done;)a.value.to_remove=!0}catch(i){o.e(i)}finally{o.f()}e.score+=10}};for(n.s();!(t=n.n()).done;)r()}catch(f){n.e(f)}finally{n.f()}var a,o=Object(l.a)(e.missles);try{for(o.s();!(a=o.n()).done;){var i=a.value;1===e.mushrooms[i.x][i.y]&&(i.to_remove=!0,S(i.x,i.y,e),e.score+=1)}}catch(f){o.e(f)}finally{o.f()}var c,s=Object(l.a)(e.missles);try{var u=function(){var t=c.value,n=e.centipede.filter((function(e){return e.x===t.x&&e.y===t.y}));if(n.length>0){e.score+=25;var r,a=Object(l.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;e.centipede=G(o,e)}}catch(f){a.e(f)}finally{a.f()}}};for(s.s();!(c=s.n()).done;)u()}catch(f){s.e(f)}finally{s.f()}void 0!==e.centipede.find((function(t){return t.x===e.player_x&&t.y===e.player_y}))&&(e.player_is_alive=!1)}(n),n}return W()}if("usermove"===t.TYPE){var r=function(e,t){var n,r={x:t.player_x,y:t.player_y};return"right"===e?r.x=t.player_x+1<w?t.player_x+1:t.player_x:"left"===e?r.x=t.player_x-1>=0?t.player_x-1:t.player_x:"up"===e?r.y=t.player_y-1>=18?t.player_y-1:t.player_y:"down"===e&&(r.y=t.player_y+1<w?t.player_y+1:t.player_y),r.x===t.player_x&&r.y===t.player_y||("empty"===(n=t.game_arena[r.x].items[r.y].content)||"player"===n?(t.game_arena[t.player_x].items[t.player_y].content=T,t.game_arena[r.x].items[r.y].content="player"):console.log("collision "+t.game_arena[r.x].items[r.y].content)),r}(t.direction,e);return Object(s.a)(Object(s.a)({},e),{},{player_x:r.x,player_y:r.y})}return"fire"===t.TYPE&&e.missles.length<20?Object(s.a)(Object(s.a)({},e),{},{missles:q(e)}):e},H=W();var K=function(){var e=Object(r.useReducer)(z,H),t=Object(c.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){var e=window.setInterval((function(){a({TYPE:"tick"})}),100);return window.onkeydown=function(e){"ArrowRight"===e.code?a({TYPE:"usermove",direction:"right"}):"ArrowLeft"===e.code?a({TYPE:"usermove",direction:"left"}):"ArrowUp"===e.code?a({TYPE:"usermove",direction:"up"}):"ArrowDown"===e.code?a({TYPE:"usermove",direction:"down"}):"Space"===e.code&&a({TYPE:"fire"})},function(){return clearInterval(e)}}),[]);var o=n.game_arena,i=n.score;return Object(m.jsxs)("div",{className:"game",children:[Object(m.jsx)(x,{score:i}),Object(m.jsx)(k,{children:Object(m.jsx)(p,{arena:o})})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};i.a.render(Object(m.jsx)(K,{}),document.getElementById("root")),X()},4:function(e,t,n){e.exports={"game-item":"Element_game-item__2eEt5",yellow:"Element_yellow__14iBl",green:"Element_green__CaUlM",image:"Element_image__dlefQ","ant-left":"Element_ant-left__3iv_n","ant-right":"Element_ant-right__GjDN7",mushroom:"Element_mushroom__1tiTG",missle:"Element_missle__3Gc0T",player:"Element_player__3VYnt",bugleft:"Element_bugleft__3Qc8j",bugright:"Element_bugright__2p_Vl",stage1:"Element_stage1__xd45m",stage2:"Element_stage2__2gNWE"}},7:function(e,t,n){e.exports={scores:"Scores_scores__qFD0D",logo:"Scores_logo__1NA7S"}},9:function(e,t,n){e.exports={line:"Arena_line__2yT2B"}}},[[22,1,2]]]);
//# sourceMappingURL=main.0edc80e8.chunk.js.map